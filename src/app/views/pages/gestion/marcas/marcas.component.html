<div class="container mt-4">
    <div class="card shadow-sm rounded-3 border-0">
      <div class="card-header py-3 border-bottom">
        <div class="d-flex justify-content-between align-items-center">
          <h2 class="mb-0 fw-bold text-primary">Marcas de Vehículos</h2>
          <button class="btn btn-outline-primary d-flex align-items-center" (click)="openModal(content)">
            <i data-feather="plus" appFeatherIcon></i> Agregar
          </button>
        </div>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-striped table-hover border-bottom" id="marcasTable">
            <thead class="table">
              <tr>
                <th class="ps-4 py-3">Marca</th>
                <th class="py-3 text-end pe-4">Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let marca of marcas">
                <td class="ps-4 py-3 align-middle">{{ marca.marca }}</td>
                <td class="py-3 text-end pe-4">
                  <button class="btn btn-outline-warning btn-sm me-2" (click)="openModal(content, true, marca)">
                    <i data-feather="edit" appFeatherIcon></i> Editar
                  </button>
                  <button class="btn btn-outline-danger btn-sm" (click)="deleteMarca(marca.marca_id)">
                    <i data-feather="trash" appFeatherIcon></i> Eliminar
                  </button>
                </td>
              </tr>
              <tr *ngIf="marcas.length === 0">
                <td colspan="2" class="text-center py-4 text-muted fst-italic">
                  No hay marcas registradas
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        
        <!-- Paginación simple para simular DataTable -->
        <div class="d-flex justify-content-between align-items-center px-4 py-3 border-top">
          <div>
            <span class="text-muted small">Mostrando 1-{{marcas.length}} de {{marcas.length}} registros</span>
          </div>
          <div>
            <nav aria-label="Page navigation">
              <ul class="pagination pagination-sm mb-0">
                <li class="page-item disabled">
                  <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Anterior</a>
                </li>
                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                <li class="page-item disabled">
                  <a class="page-link" href="#">Siguiente</a>
                </li>
              </ul>
            </nav>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Modal -->
  <ng-template #content let-modal>
    <div class="modal-header border-bottom">
      <h4 class="modal-title fw-bold" id="modal-basic-title">
        <i class="bi" [ngClass]="isEdit ? 'bi-pencil-square text-primary' : 'bi-plus-circle text-success'"></i>
        <span class="ms-2">{{ isEdit ? 'Editar' : 'Agregar' }} Marca</span>
      </h4>
      <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
    </div>
    <div class="modal-body">
      <form #marcaForm="ngForm">
        <div class="mb-3">
          <label for="marca" class="form-label">Nombre de la Marca</label>
          <div class="input-group">
            <span class="input-group-text">
                <i data-feather="edit" appFeatherIcon></i> 
            </span>
            <input 
              type="text" 
              class="form-control" 
              id="marca" 
              [(ngModel)]="currentMarca.marca" 
              name="marca" 
              required
              placeholder="Ingrese el nombre de la marca"
              autocomplete="off"
            >
          </div>
          <div *ngIf="marcaForm.controls['marca']?.invalid && marcaForm.controls['marca']?.touched" class="text-danger small mt-1">
            <i class="bi bi-exclamation-circle me-1"></i>El nombre de la marca es obligatorio
          </div>
        </div>
      </form>
    </div>
    <div class="modal-footer">
      <button type="button" class="btn btn-outline-danger" (click)="modal.dismiss('Cancel')">
        <i data-feather="x" appFeatherIcon></i> Cancelar
      </button>
      <button *ngIf="!isEdit" type="button" class="btn btn-outline-success" [disabled]="!marcaForm.valid" (click)="addMarca(modal)">
        <i data-feather="save" appFeatherIcon></i> Agregar
      </button>
      <button *ngIf="isEdit" type="button" class="btn btn-outline-success" [disabled]="!marcaForm.valid" (click)="updateMarca(modal)">
        <i data-feather="save" appFeatherIcon></i>> Actualizar
      </button>
    </div>
  </ng-template>